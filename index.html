<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contador de billetes</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-neutral-300">
    <div class="min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full space-y-4">
            <div>
                <label for="monto" class="block text-sm font-medium text-gray-700">Monto</label>
                <div class="mt-1 relative rounded-md flex w-64">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <span class="text-gray-500"> S/ </span>
                    </div>
                    <input type="number" name="monto" id="monto"
                        class="focus:ring-indigo-500 focus:border-indigo-500  pl-7 border-gray-300 rounded-md w-1/2 shadow-sm"
                        placeholder="0.00">
                    <button onclick="contarbilletes()"
                        class="ml-4 pointer-events-auto rounded-md py-2 px-4 text-center font-medium shadow-sm ring-1 ring-slate-700/10 bg-indigo-500 uppercase ">contar</button>
                </div>
            </div>
            <div class="flex">
                <img src="billete-10-2021.jpg" alt="billete de 10 soles" class="w-32">
                <div class="w-full pl-4 place-self-center">
                    <input type="text" name="billete10" id="billete10" class="text-center w-full" readonly>
                </div>
            </div>
            <div class="flex">
                <img src="billete-20.jpg" alt="billete de 20 soles" class="w-32">
                <div class="w-full pl-4 place-self-center">
                    <input type="text" name="billete20" id="billete20" class="text-center w-full" readonly>
                </div>
            </div>
            <div class="flex">
                <img src="billete-50-2018.jpg" alt="billete de 50 soles" class="w-32">
                <div class="w-full pl-4 place-self-center">
                    <input type="text" name="billete50" id="billete50" class="text-center w-full" readonly>
                </div>
            </div>
            <div class="flex">
                <img src="billete-100-2021.jpg" alt="billete de 100 soles" class="w-32">
                <div class="w-full pl-4 place-self-center">
                    <input type="text" name="billete100" id="billete100" class="text-center w-full" readonly>
                </div>
            </div>
            <div class="flex">
                <img src="billete-200.jpg" alt="billete de 200 soles" class="w-32">
                <div class="w-full pl-4 place-self-center">
                    <input type="text" name="billete200" id="billete200" class="text-center w-full" readonly>
                </div>
            </div>
            <div id="residuo" class="text-center mt-4 text-lg"></div>
        </div>
    </div>
    <script>
        function contarbilletes() {
            monto = parseFloat(document.getElementById('monto').value);
            if (monto.length == 0) {
                alert('monto vacío');
            } else if (isNaN(monto)) {
                alert('no es número');
            } else if (monto <= 0) {
                alert('monto negativo');
            } else {
                billetes = [10, 20, 50, 100, 200];
                resultado = {
                    10: 0,
                    20: 0,
                    50: 0,
                    100: 0,
                    200: 0,
                };
                while (monto >= 10) {
                    if (monto >= 200) {
                        billeteRandom = billetes[Math.floor(Math.random() * 5)];
                        residuo = monto % billeteRandom;
                        cantidadExacta = monto - residuo;
                        cantidadBilletesMaxima = cantidadExacta / billeteRandom;
                        cantidadBilletes = Math.floor(Math.random() * cantidadBilletesMaxima) + 1;
                        resultado[billeteRandom] += cantidadBilletes;
                        monto = monto - (billeteRandom * cantidadBilletes);
                    } else if (monto >= 100) {
                        billeteRandom = billetes[Math.floor(Math.random() * 4)];
                        residuo = monto % billeteRandom;
                        cantidadExacta = monto - residuo;
                        cantidadBilletesMaxima = cantidadExacta / billeteRandom;
                        cantidadBilletes = Math.floor(Math.random() * cantidadBilletesMaxima) + 1;
                        resultado[billeteRandom] += cantidadBilletes;
                        monto = monto - (billeteRandom * cantidadBilletes);
                    } else if (monto >= 50) {
                        billeteRandom = billetes[Math.floor(Math.random() * 3)];
                        residuo = monto % billeteRandom;
                        cantidadExacta = monto - residuo;
                        cantidadBilletesMaxima = cantidadExacta / billeteRandom;
                        cantidadBilletes = Math.floor(Math.random() * cantidadBilletesMaxima) + 1;
                        resultado[billeteRandom] += cantidadBilletes;
                        monto = monto - (billeteRandom * cantidadBilletes);
                    } else if (monto >= 20) {
                        billeteRandom = billetes[Math.floor(Math.random() * 2)];
                        residuo = monto % billeteRandom;
                        cantidadExacta = monto - residuo;
                        cantidadBilletesMaxima = cantidadExacta / billeteRandom;
                        cantidadBilletes = Math.floor(Math.random() * cantidadBilletesMaxima) + 1;
                        resultado[billeteRandom] += cantidadBilletes;
                        monto = monto - (billeteRandom * cantidadBilletes);
                    } else if (monto >= 10) {
                        billeteRandom = billetes[Math.floor(Math.random() * 1)];
                        residuo = monto % billeteRandom;
                        cantidadExacta = monto - residuo;
                        cantidadBilletesMaxima = cantidadExacta / billeteRandom;
                        cantidadBilletes = Math.floor(Math.random() * cantidadBilletesMaxima) + 1;
                        resultado[billeteRandom] += cantidadBilletes;
                        monto = monto - (billeteRandom * cantidadBilletes);
                    }
                }

                Object.keys(resultado).forEach(billete => {
                    document.getElementById('billete' + billete).value = resultado[billete];
                    console.log(billete, resultado[billete]);
                });

                if (1 <= monto && monto < 2) {
                    document.getElementById('residuo').innerHTML = 'Sobra S/' + monto.toFixed(2);
                } else {
                    document.getElementById('residuo').innerHTML = 'Sobran S/' + monto.toFixed(2);
                }
            }
        }
    </script>
</body>

</html>